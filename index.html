<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BurnerInbox - Free Temporary Email | Temp Mail Generator</title>
    <meta name="description" content="Get instant free temporary email addresses with BurnerInbox. Protect your privacy, avoid spam & use temp mail for OTP verification, signups. Secure & disposable email generator.">
    <meta name="keywords" content="temp mail, temporary email, disposable email, free temporary email, temp email generator, temporary email address, anonymous email, fake email, trash mail, email for otp, privacy, spam protection, burner mail, BurnerInbox">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- CSS (No Changes from previous version) --- */
        :root { /* Light Mode */ --bg-color-light: #f8f9fa; --card-bg-color-light: #ffffff; --secondary-bg-color-light: #eef7f7; --text-color-light: #1f2937; --text-muted-color-light: #6b7280; --text-on-accent-light: #ffffff; --header-bg-light: linear-gradient(100deg, #45A29E 0%, #5dc4bf 100%); --header-text-light: #ffffff; --primary-accent-light: #45A29E; --primary-accent-dark-light: #3a8a87; --secondary-accent-light: #2193b0; --border-color-light: #dee2e6; --shadow-color-light-mode: rgba(0, 0, 0, 0.1); --glow-color-light: rgba(69, 162, 158, 0.4); --error-bg-light: #f8d7da; --error-text-light: #721c24; --error-border-light: #f5c6cb; --warning-bg-light: #fff3cd; --warning-text-light: #664d03; --warning-border-light: #ffecb5; --success-bg-light: #d1e7dd; --success-text-light: #0f5132; --success-border-light: #badbcc; /* Dark Mode */ --bg-color-dark: #0f172a; --card-bg-color-dark: rgba(30, 41, 59, 0.8); --secondary-bg-color-dark: rgba(51, 65, 85, 0.7); --text-color-dark: #cbd5e1; --text-muted-color-dark: #94a3b8; --text-on-accent-dark: #0f172a; --header-bg-dark: rgba(15, 23, 42, 0.7); --header-text-dark: #f1f5f9; --primary-accent-dark-theme: #66FCF1; --primary-accent-darker-dark: #50d9cb; --secondary-accent-dark: #45A29E; --border-color-dark: rgba(71, 85, 105, 0.6); --shadow-color-dark-mode: rgba(0, 0, 0, 0.3); --glow-color-dark: rgba(102, 252, 241, 0.6); --error-bg-dark: rgba(153, 27, 27, 0.3); --error-text-dark: #fca5a5; --error-border-dark: rgba(153, 27, 27, 0.7); --warning-bg-dark: rgba(255, 193, 7, 0.15); --warning-text-dark: #ffca2c; --warning-border-dark: rgba(255, 193, 7, 0.3); --success-bg-dark: rgba(21, 128, 61, 0.3); --success-text-dark: #bbf7d0; --success-border-dark: rgba(21, 128, 61, 0.7); /* Defaults */ --bg-color: var(--bg-color-light); --card-bg-color: var(--card-bg-color-light); --secondary-bg-color: var(--secondary-bg-color-light); --text-color: var(--text-color-light); --text-muted-color: var(--text-muted-color-light); --text-on-accent: var(--text-on-accent-light); --header-bg: var(--header-bg-light); --header-text: var(--header-text-light); --primary-accent: var(--primary-accent-light); --primary-accent-dark: var(--primary-accent-dark-light); --secondary-accent: var(--secondary-accent-light); --border-color: var(--border-color-light); --shadow-color: var(--shadow-color-light-mode); --glow-color: var(--glow-color-light); --error-bg: var(--error-bg-light); --error-text: var(--error-text-light); --error-border: var(--error-border-light); --warning-bg: var(--warning-bg-light); --warning-text: var(--warning-text-light); --warning-border: var(--warning-border-light); --success-bg: var(--success-bg-light); --success-text: var(--success-text-light); --success-border: var(--success-border-light); /* Common */ --font-family: "Inter", system-ui, sans-serif; --border-radius-large: 12px; --border-radius-medium: 8px; --border-radius-small: 5px; --transition-speed: 0.25s; --shadow-light: rgba(0, 0, 0, 0.05); --shadow-medium: rgba(0, 0, 0, 0.1); --shadow-strong: rgba(0, 0, 0, 0.15); }
        body.dark-mode { /* Dark Mode Overrides */ --bg-color: var(--bg-color-dark); --card-bg-color: var(--card-bg-color-dark); --secondary-bg-color: var(--secondary-bg-color-dark); --text-color: var(--text-color-dark); --text-muted-color: var(--text-muted-color-dark); --text-on-accent: var(--text-on-accent-dark); --header-bg: var(--header-bg-dark); --header-text: var(--header-text-dark); --primary-accent: var(--primary-accent-dark-theme); --primary-accent-dark: var(--primary-accent-darker-dark); --secondary-accent: var(--secondary-accent-dark); --border-color: var(--border-color-dark); --shadow-color: var(--shadow-color-dark-mode); --glow-color: var(--glow-color-dark); --error-bg: var(--error-bg-dark); --error-text: var(--error-text-dark); --error-border: var(--error-border-dark); --warning-bg: var(--warning-bg-dark); --warning-text: var(--warning-text-dark); --warning-border: var(--warning-border-dark); --success-bg: var(--success-bg-dark); --success-text: var(--success-text-dark); --success-border: var(--success-border-dark); --shadow-light: rgba(0, 0, 0, 0.15); --shadow-medium: rgba(0, 0, 0, 0.25); --shadow-strong: rgba(0, 0, 0, 0.35); }
        @keyframes subtleGlow { 0%, 100% { box-shadow: 0 5px 10px var(--shadow-medium), 0 0 5px 0px transparent; } 50% { box-shadow: 0 8px 15px var(--shadow-strong), 0 0 18px 5px var(--glow-color); } }
        @keyframes textGlow { 0%, 100% { text-shadow: 0 0 4px transparent; } 50% { text-shadow: 0 0 10px var(--glow-color); } }
        body.light-mode @keyframes subtleGlow { 0%, 100% { box-shadow: 0 5px 10px var(--shadow-medium), 0 0 3px 0px transparent; } 50% { box-shadow: 0 8px 15px var(--shadow-strong), 0 0 10px 2px var(--glow-color); } }
        body.light-mode @keyframes textGlow { 0%, 100% { text-shadow: none; } 50% { text-shadow: 0 0 6px var(--glow-color); } }
        body.light-mode .btn:hover, body.light-mode header h1, body.light-mode .inbox-header h2, body.light-mode .info-links .info-btn:hover, body.light-mode .footer-links .info-btn:hover, body.light-mode .social-icons a:hover img { animation: none; text-shadow: none; filter: none; }
        body.light-mode header h1 { text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2); }
        /* --- Rest of CSS --- */
        * { margin: 0; padding: 0; box-sizing: border-box; } html { scroll-behavior: smooth; } body { font-family: var(--font-family); background-color: var(--bg-color); color: var(--text-color); line-height: 1.65; display: flex; flex-direction: column; min-height: 100vh; padding-top: 70px; font-size: 16px; transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease; }
        .glass { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        body.dark-mode .glass { background: rgba(28, 30, 41, 0.7); border: 1px solid var(--border-color); }
        header { background: var(--header-bg); padding: 0.9rem 5%; position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; border-bottom: 1px solid var(--border-color); transition: background var(--transition-speed) ease, border-color var(--transition-speed) ease; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 5px 15px var(--shadow-light); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); height: 70px; }
        header .logo { display: flex; align-items: center; gap: 0.8rem; }
        .logo-circle { width: 38px; height: 38px; background: linear-gradient(135deg, var(--primary-accent), var(--secondary-accent)); border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 0 8px rgba(0,0,0, 0.15); transition: transform 0.3s ease; }
        .logo-circle:hover { transform: scale(1.05); }
        .logo-circle span { font-size: 1.1rem; font-weight: bold; color: var(--bg-color); transition: color var(--transition-speed) ease; }
        header h1 { color: var(--header-text); font-weight: 700; font-size: 1.6em; margin: 0; transition: color var(--transition-speed) ease; animation: textGlow 2.5s infinite alternate; text-shadow: 0 1px 2px rgba(0,0,0, 0.2); }
        #themeToggle { background: none; border: 1px solid var(--header-text); color: var(--header-text); font-size: 1.2em; cursor: pointer; padding: 4px 7px; border-radius: var(--border-radius-medium); transition: all var(--transition-speed) ease; line-height: 1; opacity: 0.8; }
        #themeToggle:hover { opacity: 1; border-color: var(--primary-accent); color: var(--primary-accent); background-color: rgba(255, 255, 255, 0.1); }
        body.dark-mode #themeToggle { border-color: var(--primary-accent); color: var(--primary-accent); } body.dark-mode #themeToggle:hover { background-color: rgba(102, 252, 241, 0.1); }
        main { flex-grow: 1; max-width: 1100px; width: 94%; margin: 2.5rem auto; padding: 2.5rem; background-color: var(--card-bg-color); border-radius: var(--border-radius-large); box-shadow: 0 10px 35px var(--shadow-medium); border: 1px solid var(--border-color); display: flex; flex-direction: column; gap: 2rem; transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease; }
        body.dark-mode main { backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); }
        .email-generation, .inbox-section, .info-links, .extended-content { transition: border-color var(--transition-speed) ease; }
        .email-generation { text-align: center; padding-bottom: 2rem; border-bottom: 1px solid var(--border-color); display: flex; flex-direction: column; align-items: center; gap: 1.25rem; }
        .domain-selection { display: flex; flex-direction: column; align-items: center; gap: 8px; margin-bottom: 1rem; width: 100%; max-width: 420px; }
        .domain-selection label { font-weight: 500; color: var(--text-muted-color); font-size: 0.9em; transition: color var(--transition-speed) ease; }
        #domainSelect { width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: var(--border-radius-medium); background-color: var(--card-bg-color); color: var(--text-color); font-family: inherit; font-size: 0.95rem; cursor: pointer; transition: all var(--transition-speed) ease; box-shadow: inset 0 1px 2px var(--shadow-light); appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23${(getComputedStyle(document.documentElement).getPropertyValue('--text-muted-color') || '#6c757d').substring(1)}' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 1rem center; background-size: 1em; padding-right: 3rem; }
        #domainSelect:hover { border-color: var(--primary-accent); }
        #domainSelect:focus { outline: none; border-color: var(--primary-accent); box-shadow: inset 0 1px 2px var(--shadow-light), 0 0 0 3px var(--glow-color); }
        #domainSelect:disabled { background-color: var(--secondary-bg-color); cursor: not-allowed; opacity: 0.7; }
        .email-display-container { padding: 1rem 1.5rem; background-color: var(--secondary-bg-color); border-radius: var(--border-radius-medium); border: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; gap: 1rem; flex-wrap: wrap; box-shadow: inset 0 1px 3px var(--shadow-light); opacity: 0; transform: translateY(10px); transition: opacity 0.5s ease-out, transform 0.5s ease-out, background-color var(--transition-speed) ease, border-color var(--transition-speed) ease; width: 100%; max-width: 700px; margin-left: auto; margin-right: auto; }
        .email-display-container.visible { opacity: 1; transform: translateY(0); }
        #emailDisplay { font-size: 1.2em; font-weight: 500; color: var(--primary-accent-dark); word-break: break-all; margin: 0; flex-grow: 1; text-align: left; padding: 5px; font-family: 'ui-monospace', monospace; transition: color var(--transition-speed) ease; }
        body.dark-mode #emailDisplay { color: var(--primary-accent); }
        .btn { font-family: inherit; font-size: 1rem; font-weight: 600; color: var(--text-on-accent); background-color: var(--primary-accent); border: none; padding: 0.8rem 1.8rem; border-radius: var(--border-radius-medium); cursor: pointer; text-align: center; text-decoration: none; transition: all var(--transition-speed) ease; box-shadow: 0 4px 8px var(--shadow-medium), inset 0 -2px 1px rgba(0,0,0,0.1); transform: translateY(0); display: inline-block; }
        .btn:hover { background-color: var(--primary-accent-dark); transform: translateY(-2px); box-shadow: 0 7px 14px var(--shadow-strong), inset 0 -2px 1px rgba(0,0,0,0.1), 0 0 12px 1px var(--glow-color); animation: subtleGlow 1.5s infinite alternate; }
        .btn:active { transform: translateY(1px); background-color: var(--primary-accent-dark); box-shadow: 0 2px 4px var(--shadow-medium), inset 0 2px 4px rgba(0,0,0,0.2); animation: none; }
        .btn:disabled { background-color: var(--text-muted-color); color: rgba(255,255,255,0.7); cursor: not-allowed; box-shadow: 0 2px 4px var(--shadow-light), inset 0 -1px 0 rgba(0,0,0,0.1); transform: translateY(0); opacity: 0.6; animation: none; }
        .btn-copy { background-color: var(--text-muted-color); color: var(--text-light); box-shadow: 0 4px 8px var(--shadow-light), inset 0 -2px 1px rgba(0,0,0,0.1); padding: 0.6rem 1rem; font-size: 0.9em; min-width: 85px; flex-shrink: 0; animation: none !important; }
        .btn-copy:hover { background-color: #525a63; transform: translateY(-2px); box-shadow: 0 6px 12px var(--shadow-medium), inset 0 -2px 1px rgba(0,0,0,0.1); }
        .btn-copy:active { transform: translateY(1px); box-shadow: 0 2px 5px var(--shadow-light), inset 0 3px 5px rgba(0,0,0,0.2); background-color: #525a63; }
        .btn-copy.copied { background-color: var(--success-color); border-color: var(--success-border); color: var(--success-text); box-shadow: 0 4px 8px var(--shadow-light), inset 0 -2px 1px rgba(0,0,0,0.1); }
        .btn-copy.copied:hover, .btn-copy.copied:active { transform: translateY(0); }
        body.dark-mode .btn-copy { background-color: #4b5563; color: #e5e7eb; } body.dark-mode .btn-copy:hover { background-color: #6b7280; } body.dark-mode .btn-copy:active { background-color: #374151; } body.dark-mode .btn-copy.copied { background-color: var(--success-bg); color: var(--success-text); border-color: var(--success-border); }
        .inbox-section { padding: 2rem; min-height: 300px; position: relative; background-color: var(--card-bg-color); border: 1px solid var(--border-color); border-radius: var(--border-radius-large); box-shadow: 0 6px 20px var(--shadow-light); transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease; }
        .inbox-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color); flex-wrap: wrap; gap: 1rem; transition: border-color var(--transition-speed) ease; }
        .inbox-header h2 { color: var(--primary-accent); font-weight: 600; font-size: 1.5em; flex-shrink: 0; margin: 0; transition: color var(--transition-speed) ease; animation: textGlow 2.5s infinite alternate; }
        .inbox-controls { display: flex; align-items: center; gap: 1rem; flex-shrink: 0; }
        #refreshTimer { font-size: 0.85em; color: var(--text-muted-color); background-color: var(--secondary-bg-color); padding: 0.5rem 0.8rem; border-radius: var(--border-radius-small); min-width: 120px; text-align: center; transition: all var(--transition-speed) ease; border: 1px solid var(--border-color); }
        #refreshTimer.refreshing { background-color: rgba(82, 169, 255, 0.1); color: var(--primary-accent); border-color: var(--border-color); font-weight: 500; }
        body.light-mode #refreshTimer.refreshing { background-color: #cfe2ff; color: #0a58ca; border-color: #b6d4fe; }
        #refreshBtn { font-size: 1.1em; background: var(--secondary-bg-color); color: var(--primary-accent); border: 1px solid var(--border-color); border-radius: 50%; width: 38px; height: 38px; padding: 0; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.15s ease-out; box-shadow: 0 3px 6px var(--shadow-light), inset 0 -1px 1px rgba(0,0,0,0.05), inset 0 1px 1px rgba(255,255,255,0.05); }
        #refreshBtn:hover { background-color: rgba(82, 169, 255, 0.1); border-color: var(--primary-accent); color: var(--primary-accent); transform: translateY(-2px) rotate(90deg); box-shadow: 0 5px 10px var(--shadow-medium), 0 0 8px 1px var(--glow-color); }
        #refreshBtn:active { transform: translateY(1px) rotate(45deg); box-shadow: 0 1px 2px var(--shadow-light), inset 0 2px 3px rgba(0, 0, 0, 0.2); }
        #refreshBtn:disabled { color: var(--text-muted-color); background-color: var(--secondary-bg-color); cursor: not-allowed; transform: none; box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); opacity: 0.6; }
        #loader { position: absolute; top: 60%; left: 50%; transform: translate(-50%, -50%); font-size: 1rem; color: var(--primary-accent); display: none; text-align: center; background: var(--card-bg-color); padding: 1.5rem; border-radius: var(--border-radius); border: 1px solid var(--border-color); z-index: 5; box-shadow: 0 5px 15px var(--shadow-medium); transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease; }
        #loader::before { content: ''; display: block; width: 25px; height: 25px; margin: 0 auto 0.75rem; border: 3px solid var(--primary-accent); border-top-color: transparent; border-radius: 50%; animation: spin 0.8s linear infinite; }
        #messageList { list-style: none; padding: 0; margin: 0; max-height: 600px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: var(--border-radius-medium); background-color: var(--secondary-bg-color); box-shadow: inset 0 1px 4px var(--shadow-light); transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease; }
        #messageList li { padding: 1rem 1.1rem; border-bottom: 1px solid var(--border-color); background-color: transparent; transition: background-color 0.15s ease, transform 0.15s ease, border-left-color 0.15s ease; cursor: pointer; position: relative; border-left: 3px solid transparent; }
        #messageList li:last-child { border-bottom: none; }
        #messageList li:hover { background-color: rgba(82, 169, 255, 0.08); transform: translateX(4px); }
        #messageList li.selected { background-color: rgba(82, 169, 255, 0.15); transform: translateX(4px); border-left-color: var(--primary-accent); }
        #messageList .msg-header { color: var(--text-muted-color); margin-bottom: 0.4rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 0.5rem; font-size: 0.9em; transition: color var(--transition-speed) ease; }
        #messageList .msg-sender { font-weight: 600; color: var(--primary-accent); word-break: break-all; margin-right: 0.5rem; transition: color var(--transition-speed) ease; }
        #messageList .msg-date { color: var(--text-muted-color); white-space: nowrap; transition: color var(--transition-speed) ease; }
        #messageList .msg-subject { font-weight: 600; margin-bottom: 0.3rem; font-size: 1.05em; color: var(--text-color); transition: color var(--transition-speed) ease; }
        #messageList .msg-intro { font-size: 0.95em; color: var(--text-muted-color); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; transition: color var(--transition-speed) ease; }
        #emptyInboxMessage { text-align: center; color: var(--text-muted-color); padding: 2.5rem; font-size: 1.1em; display: block; background-color: var(--secondary-bg-color); border-top: 1px solid var(--border-color); margin-top: -1px; border-radius: 0 0 var(--border-radius-medium) var(--border-radius-medium); transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease, color var(--transition-speed) ease; }
        .info-links { text-align: center; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color); transition: border-color var(--transition-speed) ease; }
        .info-links .info-btn { background: none; border: none; color: var(--primary-accent); cursor: pointer; text-decoration: underline; font-size: 0.9em; margin: 0 0.5rem; padding: 0.25rem; transition: color var(--transition-speed) ease; }
        .info-links .info-btn:hover { color: var(--primary-accent-dark); text-shadow: 0 0 8px var(--glow-color); }
        .extended-content { margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--border-color); display: flex; flex-direction: column; gap: 1.5rem; transition: border-color var(--transition-speed) ease; }
        .content-card { background-color: var(--card-bg-color); border-radius: var(--border-radius-medium); padding: 1.5rem 2rem; border: 1px solid var(--border-color); box-shadow: 0 4px 10px var(--shadow-light); transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease; }
        .content-card h2 { color: var(--primary-accent); font-size: 1.6em; font-weight: 600; margin-bottom: 1.2rem; transition: color var(--transition-speed) ease; }
        .content-card h3 { color: var(--secondary-accent); font-size: 1.2em; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.8rem; transition: color var(--transition-speed) ease; }
        .content-card p { margin-bottom: 1rem; color: var(--text-color); line-height: 1.7; transition: color var(--transition-speed) ease; }
        .content-card ul { list-style: disc; margin-left: 1.2rem; margin-bottom: 1rem; padding-left: 1rem; }
        .content-card li { margin-bottom: 0.5rem; color: var(--text-color); transition: color var(--transition-speed) ease; }
        .content-card strong { color: var(--text-color); font-weight: 600; }
        .footer { background: var(--secondary-bg-color); padding: 2rem 5%; margin-top: auto; text-align: center; color: var(--text-muted-color); border-top: 1px solid var(--border-color); box-shadow: 0 -4px 15px var(--shadow-light); transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease, color var(--transition-speed) ease; }
        .footer-links { display: flex; justify-content: center; gap: 1.5rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .footer-links button.info-btn { background: none; border: none; color: var(--primary-accent); cursor: pointer; text-decoration: underline; font-size: 0.9rem; transition: all 0.3s ease; padding: 0; }
        .footer-links button.info-btn:hover { color: var(--primary-accent-dark); text-shadow: 0 0 8px var(--glow-color); }
        .social-icons { display: flex; justify-content: center; gap: 1.5rem; margin-top: 1rem; margin-bottom: 1rem; }
        .social-icons a { color: var(--text-muted-color); font-size: 1.3rem; transition: all 0.3s ease; text-decoration: none; }
        .social-icons a img { height: 1.3em; width: 1.3em; vertical-align: middle; transition: all 0.3s ease; color: var(--text-muted-color); }
        .social-icons a:hover img { color: var(--primary-accent); transform: translateY(-3px) scale(1.1); filter: drop-shadow(0 0 5px var(--glow-color)); }
        .social-icons a[aria-label="Email Us"] img { height: 1.1em; width: auto; }
        .social-icons a:hover[aria-label="Email Us"] img { transform: translateY(-3px) scale(1.1); filter: none; }
        .footer p { font-size: 0.85rem; margin-top: 1rem; }
        body.dark-mode .footer { background: #111827; }
        .modal { display: none; position: fixed; z-index: 1050; left: 0; top: 0; width: 100%; height: 100%; overflow: hidden; background-color: rgba(0, 0, 0, 0.7); align-items: center; justify-content: center; padding: 1rem; }
        .modal-content { background: var(--card-bg-color); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); color: var(--text-color); margin: auto; padding: 1.5rem 2rem; border-radius: var(--border-radius-large); box-shadow: 0 5px 15px var(--shadow-medium); width: 100%; position: relative; animation: fadeInModal 0.3s ease-out; max-height: calc(100vh - 2rem); display: flex; flex-direction: column; border: 1px solid var(--border-color); overflow: hidden; transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease, color var(--transition-speed) ease; }
        #aboutModal .modal-content, #termsModal .modal-content, #privacyModal .modal-content, #faqModal .modal-content, #contactModal .modal-content { max-width: 600px; }
        #messageModal .modal-content { max-width: 800px; }
        @keyframes fadeInModal { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; margin-bottom: 1.5rem; flex-shrink: 0; transition: border-color var(--transition-speed) ease; }
        .modal-header h2 { color: var(--primary-accent); font-size: 1.5em; font-weight: 600; margin: 0; transition: color var(--transition-speed) ease; }
        .close-modal { color: var(--text-muted-color); font-size: 1.75rem; font-weight: bold; background: none; border: none; cursor: pointer; line-height: 1; padding: 0 0.25rem; transition: color 0.2s; }
        .close-modal:hover, .close-modal:focus { color: var(--primary-accent); }
        .modal-body { overflow-y: auto; flex-grow: 1; padding-right: 5px; }
        .modal-body p { margin-bottom: 1rem; }
        .modal-body h3 { margin-top: 1.5rem; margin-bottom: 0.5rem; color: var(--secondary-accent); font-weight: 600; transition: color var(--transition-speed) ease; }
        .message-modal-info { margin-bottom: 1rem; font-size: 0.9em; color: var(--text-muted-color); border-bottom: 1px solid var(--border-color); padding-bottom: 0.8rem; transition: color var(--transition-speed) ease, border-color var(--transition-speed) ease; }
        .message-modal-info p { margin-bottom: 0.3rem; }
        .message-modal-info strong { color: var(--text-color); transition: color var(--transition-speed) ease; }
        #messageBodyFrame { width: 100%; min-height: 300px; height: 50vh; border: 1px solid var(--border-color); border-radius: var(--border-radius-small); background-color: #fff; transition: border-color var(--transition-speed) ease; }
        #messageBodyText { white-space: pre-wrap; word-wrap: break-word; font-family: monospace; background-color: var(--secondary-bg-color); color: var(--text-color); padding: 1rem; border: 1px solid var(--border-color); border-radius: var(--border-radius-small); max-height: 50vh; overflow-y: auto; font-size: 0.9em; transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease, border-color var(--transition-speed) ease; }
        #messageLoading { text-align: center; padding: 2rem; font-style: italic; color: var(--text-muted-color); transition: color var(--transition-speed) ease; }
        @media (max-width: 768px) { /* ... responsive styles ... */ }
        @media (max-width: 480px) { /* ... responsive styles ... */ }
        .hidden { display: none !important; }
        .visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
        .error-message { color: var(--error-text); font-size: 0.9em; font-weight: 500; text-align: center; margin-top: 1rem; padding: 0.75rem 1rem; background-color: var(--error-bg); border: 1px solid var(--error-border); border-radius: var(--border-radius-small); transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease, border-color var(--transition-speed) ease; }
    </style>
</head>
<body>

    <!-- HTML Structure -->
    <header> <div class="logo"> <div class="logo-circle"><span>BI</span></div> <h1>BurnerInbox</h1> </div> <button id="themeToggle" title="Toggle Theme">🌙</button> </header>
    <main>
        <div class="email-generation"> <div class="domain-selection"> <label for="domainSelect">Choose Domain (Optional):</label> <select id="domainSelect" name="domainSelect" disabled> <option value="">Loading domains...</option> </select> </div> <button id="generateBtn" class="btn" disabled>Generate New Address</button> <div id="emailDisplayContainer" class="email-display-container"> <span id="emailDisplay">your-email@domain.com</span> <button id="copyBtn" class="btn btn-copy">Copy</button> </div> <p id="errorDisplay" class="error-message hidden"></p> </div>
        <div class="inbox-section"> <div class="inbox-header"> <h2>Inbox</h2> <div id="inboxControlsContainer" class="inbox-controls hidden"> <span id="refreshTimer">Auto-refresh in: 10s</span> <button id="refreshBtn" title="Refresh Inbox Now"> ↻ <span class="visually-hidden">Refresh Now</span> </button> </div> </div> <div id="loader" class="hidden"><div class="spinner"></div>Loading messages...</div> <ul id="messageList"></ul> <p id="emptyInboxMessage" class="hidden">Your inbox is currently empty.</p> </div>
        <div class="info-links"> <button class="info-btn" data-modal="aboutModal">About</button> <button class="info-btn" data-modal="termsModal">Terms</button> <button class="info-btn" data-modal="privacyModal">Privacy</button> <button class="info-btn" data-modal="faqModal">FAQ</button> <button class="info-btn" data-modal="contactModal">Contact</button> </div>
        <!-- Extended Content with CardView and FULL SEO Keywords/Text -->
        <section class="extended-content"> <div class="content-card"> <h2>Free Temporary Email Service: BurnerInbox</h2> <p>BurnerInbox provides you with secure, private, and disposable temporary email addresses instantly. Protect your real inbox from spam, phishing, and data breaches by using a <strong>temp mail</strong> address for online sign-ups, forums, and verifications. Generate a <strong>free temporary email</strong> whenever you need one.</p> </div> <div class="content-card"> <h3>Why Use a Temp Mail Generator like BurnerInbox?</h3> <p>In today's digital landscape, your email address is often required for accessing services, downloading content, or joining communities. However, sharing your primary email can lead to:</p> <ul> <li>An overwhelming amount of spam and promotional emails.</li> <li>Increased risk of phishing attacks targeting your main account.</li> <li>Your personal email being exposed in website data breaches.</li> <li>Unwanted tracking by marketers and third parties.</li> </ul> <p>Using a <strong>temporary email address</strong> from our free <strong>temp mail generator</strong> mitigates these risks, keeping your primary inbox secure and clean. It's the perfect solution for <strong>spam protection</strong>.</p> </div> <div class="content-card"> <h3>Key Features & Benefits of Our Disposable Email</h3> <ul> <li><strong>Instant Generation:</strong> Get a working <strong>temp mail</strong> address with a single click, no registration needed. Fast and easy <strong>temporary email address</strong> creation.</li> <li><strong>Privacy Focused:</strong> Sign up for services anonymously using a <strong>disposable email</strong> without revealing your personal email. Maintain your <strong>anonymous email</strong> identity.</li> <li><strong>Spam Protection:</strong> Keep junk mail out of your main inbox. Use a <strong>trash mail</strong> or <strong>fake email</strong> (for temporary use) address for sites you don't fully trust.</li> <li><strong>Secure:</strong> Emails are securely handled and automatically deleted after a short period, ensuring your temporary communications remain private.</li> <li><strong>Free to Use:</strong> Our <strong>temp email generator</strong> provides <strong>free temporary email</strong> addresses at no cost.</li> <li><strong>Easy Verification:</strong> Perfect for receiving verification codes (<strong>email for OTP</strong>) or activation links without cluttering your main email. Use our <strong>temporary email for OTP</strong>.</li> </ul> </div> <div class="content-card"> <h3>Common Use Cases for Temporary Email Addresses</h3> <ul> <li>Registering on websites, forums, or social media platforms requiring a <strong>free email address</strong>.</li> <li>Accessing free trials, e-books, or software downloads with a <strong>disposable email</strong>.</li> <li>Getting OTP codes for quick verifications using <strong>temporary email for OTP</strong>.</li> <li>Testing website registration flows or email deliverability with <strong>fake email</strong> addresses (for testing purposes only).</li> <li>Avoiding newsletter subscriptions you don't want long-term.</li> <li>Protecting yourself from potential data leaks on less reputable sites using <strong>anonymous email</strong>.</li> </ul> </div> <div class="content-card"> <h3>How BurnerInbox Works</h3> <p>Simply choose a domain from the available options (or use the default) and click "Generate New Address". Your unique <strong>temporary email address</strong> will be displayed instantly. The inbox below will automatically refresh every few seconds to show incoming emails. Click on any email to view its content. Emails and the generated <strong>temp mail</strong> addresses are automatically deleted after a while for your privacy.</p> <p><strong>Important Note:</strong> Temporary email is ideal for short-term needs and <strong>privacy protection</strong>. Avoid using a <strong>disposable email</strong> for critical accounts, financial services, or long-term communication where you need permanent access to your messages.</p> </div> </section>
    </main>
    <footer class="footer"> <div class="footer-links"> <button class="info-btn" data-modal="privacyModal">Privacy Policy</button> <button class="info-btn" data-modal="termsModal">Terms of Service</button> <button class="info-btn" data-modal="contactModal">Contact Us</button> <button class="info-btn" data-modal="faqModal">FAQ</button> </div> <div class="social-icons"> <a href="mailto:support@burnerınbox.com" aria-label="Email Us" title="Email Us"> <img src="https://upload.wikimedia.org/wikipedia/commons/archive/7/7e/20221017173614%21Gmail_icon_%282020%29.svg" alt="Gmail Logo" style="height: 1.1em; vertical-align: middle;"> </a> <a href="#" aria-label="Facebook" target="_blank" rel="noopener noreferrer" title="Facebook"> <img src="https://cdn.simpleicons.org/facebook/currentColor" alt="Facebook Logo"> </a> <a href="#" aria-label="X (Twitter)" target="_blank" rel="noopener noreferrer" title="X (Twitter)"> <img src="https://cdn.simpleicons.org/x/currentColor" alt="X (Twitter) Logo"> </a> <a href="https://www.instagram.com/tausifhoon?igsh=MWsxcHo5ejdvc3pp" aria-label="Instagram" target="_blank" rel="noopener noreferrer" title="Instagram"> <img src="https://cdn.simpleicons.org/instagram/currentColor" alt="Instagram Logo"> </a> <a href="#" aria-label="LinkedIn" target="_blank" rel="noopener noreferrer" title="LinkedIn"> <img src="https://upload.wikimedia.org/wikipedia/commons/c/ca/LinkedIn_logo_initials.png" alt="LinkedIn Logo" style="height: 1.3em; width: 1.3em; vertical-align: middle;"> </a> </div> <p>© <span id="copyright-year"></span> BurnerInbox. All rights reserved.</p> </footer>

    <!-- Modals - WITH FULL CONTENT -->
    <div id="aboutModal" class="modal"> <div class="modal-content"> <div class="modal-header"> <h2>About Us</h2> <button class="close-modal">×</button> </div> <div class="modal-body"> <p>Welcome to BurnerInbox, your reliable solution for temporary email addresses. We provide secure, private, and disposable email accounts to help you protect your primary inbox from spam, phishing attempts, and unwanted newsletters.</p> <p>Our service is designed to be fast, user-friendly, and completely free. Generate a new address with a single click and start receiving emails instantly. Your privacy is our priority; emails are securely handled and automatically deleted after a period.</p> <p>Use BurnerInbox for sign-ups, registrations, testing, or any situation where you need a temporary email without compromising your personal information.</p> </div> </div> </div>
    <div id="termsModal" class="modal"> <div class="modal-content"> <div class="modal-header"> <h2>Terms of Service</h2> <button class="close-modal">×</button> </div> <div class="modal-body"> <p>By using BurnerInbox ("Service"), you agree to these terms. If you disagree, do not use the Service.</p> <h3>1. Service Use</h3> <p>The Service provides temporary, disposable email addresses. You agree not to use the Service for any illegal or unauthorized purpose. You are responsible for your conduct and any data transmitted via your temporary email address.</p> <h3>2. Service Availability</h3> <p>We strive to provide a reliable service but do not guarantee uninterrupted access. The Service may be modified, suspended, or discontinued at any time without notice.</p> <h3>3. Data Retention</h3> <p>Emails received by the Service are stored temporarily and automatically deleted after a certain period. We do not guarantee the preservation of emails. Do not use this Service for important communications.</p> <h3>4. Prohibited Activities</h3> <p>You may not use the Service to engage in spamming, phishing, sending malicious content, or any activity that violates laws or infringes on the rights of others.</p> <h3>5. Disclaimer of Warranties</h3> <p>The Service is provided "as is" without warranties of any kind. We disclaim all warranties, express or implied, including fitness for a particular purpose.</p> <h3>6. Limitation of Liability</h3> <p>We shall not be liable for any damages arising from the use or inability to use the Service.</p> <h3>7. Changes to Terms</h3> <p>We reserve the right to modify these terms at any time. Continued use of the Service constitutes acceptance of the revised terms.</p> </div> </div> </div>
    <div id="privacyModal" class="modal"> <div class="modal-content"> <div class="modal-header"> <h2>Privacy Policy</h2> <button class="close-modal">×</button> </div> <div class="modal-body"> <p>Your privacy is important to us. This policy outlines how we handle information when you use BurnerInbox.</p> <h3>1. Information We Collect</h3> <p>We do not require personal registration. When you generate a temporary email address, we temporarily store the emails sent to that address. We may collect anonymous usage data (e.g., browser type, access times) for service improvement and analytics.</p> <h3>2. Use of Information</h3> <p>The temporary email addresses and received messages are used solely to provide the core functionality of the Service. Anonymous usage data helps us understand how the Service is used and identify areas for enhancement.</p> <h3>3. Data Storage and Deletion</h3> <p>Generated email addresses and associated messages are temporary. They are automatically and permanently deleted from our systems after a set period (typically hours or days). We do not retain logs associating IP addresses with specific temporary email addresses beyond what is necessary for operational security and abuse prevention.</p> <h3>4. Cookies</h3> <p>We may use minimal cookies for essential site functionality but not for tracking personal information across sites.</p> <h3>5. Third-Party Services</h3> <p>We utilize a backend service to manage email creation and retrieval. While we operate the front-end interface, the underlying email handling relies on this service. We do not share data with other third parties except as necessary for providing the service or as required by law.</p> <h3>6. Security</h3> <p>We implement reasonable security measures to protect the data handled by our Service. However, the nature of temporary email means it is inherently less secure than a personal email account. Do not use it for sensitive information.</p> <h3>7. Changes to Policy</h3> <p>This Privacy Policy may be updated. We will post changes on this page.</p> </div> </div> </div>
    <div id="faqModal" class="modal"> <div class="modal-content"> <div class="modal-header"> <h2>Frequently Asked Questions (FAQ)</h2> <button class="close-modal">×</button> </div> <div class="modal-body"> <h3>1. What is a temporary email address?</h3> <p>It's a disposable email address (also called temp mail, trash mail, or fake email) that you can use for a short time without revealing your real email. It helps avoid spam and protect your privacy.</p> <h3>2. Is this service free?</h3> <p>Yes, BurnerInbox is completely free to use. We provide a free temporary email address generator.</p> <h3>3. How long do emails last?</h3> <p>Emails and the generated address are automatically deleted after a specific period, usually ranging from a few hours to a couple of days, to ensure privacy and manage resources.</p> <h3>4. Can I send emails from this address?</h3> <p>No, this service is designed for receiving emails only.</p> <h3>5. Is it secure?</h3> <p>We take security seriously, but temporary email is not suitable for sensitive communications or password resets for important accounts. Use it primarily for sign-ups (like getting an email for OTP) where you don't want to share your primary email.</p> <h3>6. Why didn't I receive an email?</h3> <p>There could be several reasons: the sender's service might block temporary emails, there might be a delay (common with free temp mail services!), the email could have been filtered by the sender, or the auto-refresh might need a moment. Try using the manual refresh button next to the timer. If it persists, the sender might be blocking temporary addresses.</p> </div> </div> </div>
    <div id="contactModal" class="modal"> <div class="modal-content"> <div class="modal-header"> <h2>Contact Us</h2> <button class="close-modal">×</button> </div> <div class="modal-body"> <p>We appreciate your feedback and questions.</p> <p>For general inquiries, support requests, or suggestions regarding the BurnerInbox service, please reach out to our support team.</p> <p>While we aim to respond promptly, please note that as a free service, support resources may be limited.</p> <p><strong>Email:</strong> [support@burnerinbox.com]</p> <p>We currently do not offer phone support. Thank you for using BurnerInbox!</p> </div> </div> </div>
    <div id="messageModal" class="modal"> <div class="modal-content"> <div class="modal-header"> <h2 id="messageModalSubject">Email Subject</h2> <button class="close-modal">×</button> </div> <div class="modal-body"> <div class="message-modal-info"> <p><strong>From:</strong> <span id="messageModalFrom"></span></p> <p><strong>To:</strong> <span id="messageModalTo"></span></p> <p><strong>Date:</strong> <span id="messageModalDate"></span></p> </div> <div id="messageLoading" class="hidden">Loading message content...</div> <iframe id="messageBodyFrame" class="hidden" sandbox="allow-same-origin allow-popups allow-top-navigation-by-user-activation allow-popups-to-escape-sandbox" srcdoc="<html><body></body></html>"></iframe> <pre id="messageBodyText" class="hidden"></pre> </div> </div> </div>

    <script>
        // --- JavaScript (No changes needed) ---
        const generateBtn = document.getElementById('generateBtn');
        const emailDisplayContainer = document.getElementById('emailDisplayContainer');
        const emailDisplay = document.getElementById('emailDisplay');
        const copyBtn = document.getElementById('copyBtn');
        const loader = document.getElementById('loader');
        const messageList = document.getElementById('messageList');
        const emptyInboxMessage = document.getElementById('emptyInboxMessage');
        const errorDisplay = document.getElementById('errorDisplay');
        const modalTriggers = document.querySelectorAll('.info-btn');
        const modals = document.querySelectorAll('.modal');
        const messageModal = document.getElementById('messageModal');
        const messageModalSubject = document.getElementById('messageModalSubject');
        const messageModalFrom = document.getElementById('messageModalFrom');
        const messageModalTo = document.getElementById('messageModalTo');
        const messageModalDate = document.getElementById('messageModalDate');
        const messageBodyFrame = document.getElementById('messageBodyFrame');
        const messageBodyText = document.getElementById('messageBodyText');
        const messageLoading = document.getElementById('messageLoading');
        const inboxControlsContainer = document.getElementById('inboxControlsContainer');
        const refreshTimerDisplay = document.getElementById('refreshTimer');
        const refreshBtn = document.getElementById('refreshBtn');
        const domainSelect = document.getElementById('domainSelect');
        const themeToggleButton = document.getElementById('themeToggle');
        let currentEmail = null; let currentPassword = null; let authToken = null; let inboxIntervalId = null; let countdownIntervalId = null; let countdownValue = 0; let isFetching = false; let isFetchingMessage = false; let selectedMessageId = null; let availableDomains = [];
        const REFRESH_INTERVAL_MS = 10000; const API_BASE_URL = 'https://api.mail.tm';
        function randomString(length) { const chars = 'abcdefghijklmnopqrstuvwxyz0123456789'; let result = ''; for (let i = 0; i < length; i++) { result += chars.charAt(Math.floor(Math.random() * chars.length)); } return result; }
        function showLoader() { if(loader) loader.classList.remove('hidden'); if(messageList) messageList.innerHTML = ''; if(emptyInboxMessage) emptyInboxMessage.classList.add('hidden'); }
        function hideLoader() { if(loader) loader.classList.add('hidden'); }
        function displayError(message, isWarning = false) { if (!message) { clearError(); return; } if(errorDisplay) { errorDisplay.textContent = message; errorDisplay.style.backgroundColor = isWarning ? 'var(--warning-bg, #fff3cd)' : 'var(--error-bg, #f8d7da)'; errorDisplay.style.color = isWarning ? 'var(--warning-text, #664d03)' : 'var(--error-text, #842029)'; errorDisplay.style.borderColor = isWarning ? 'var(--warning-border, #ffecb5)' : 'var(--error-border, #f5c6cb)'; errorDisplay.classList.remove('hidden'); } }
        function clearError() { if(errorDisplay) { errorDisplay.classList.add('hidden'); errorDisplay.textContent = ''; } }
        function updateCopyButton(text, isSuccess = false) { if(!copyBtn) return; copyBtn.textContent = text; copyBtn.classList.remove('copied'); copyBtn.disabled = false; if (isSuccess) { copyBtn.classList.add('copied'); copyBtn.disabled = true; setTimeout(() => { if (copyBtn && copyBtn.classList.contains('copied')) { updateCopyButton('Copy'); } }, 2500); } }
        function escapeHTML(str) { if (!str) return ''; const div = document.createElement('div'); div.textContent = str; return div.innerHTML; }
        function formatPrettyDate(dateString) { try { const date = new Date(dateString); return date.toLocaleString(undefined, { dateStyle: 'medium', timeStyle: 'short' }); } catch(e) { return dateString; } }
        function applyTheme(theme) { if (theme === 'dark') { document.body.classList.add('dark-mode'); document.body.classList.remove('light-mode'); if (themeToggleButton) themeToggleButton.textContent = '☀️'; } else { document.body.classList.remove('dark-mode'); document.body.classList.add('light-mode'); if (themeToggleButton) themeToggleButton.textContent = '🌙'; } console.log(`Theme applied: ${theme}`); }
        function toggleTheme() { const currentTheme = document.body.classList.contains('dark-mode') ? 'light' : 'dark'; applyTheme(currentTheme); try { localStorage.setItem('theme', currentTheme); } catch (e) { console.warn("Could not save theme preference.", e); } }
        function startCountdownTimer() { stopCountdownTimer(); countdownValue = REFRESH_INTERVAL_MS / 1000; updateRefreshTimerDisplay(); countdownIntervalId = setInterval(() => { countdownValue--; updateRefreshTimerDisplay(); if (countdownValue < 0) { countdownValue = REFRESH_INTERVAL_MS / 1000; } }, 1000); if(inboxControlsContainer) inboxControlsContainer.classList.remove('hidden'); if(refreshBtn) refreshBtn.disabled = !authToken; }
        function stopCountdownTimer() { if (countdownIntervalId) { clearInterval(countdownIntervalId); countdownIntervalId = null; } if (refreshTimerDisplay) refreshTimerDisplay.textContent = 'Auto-refresh off'; if (refreshTimerDisplay) refreshTimerDisplay.classList.remove('refreshing'); if (inboxControlsContainer) inboxControlsContainer.classList.add('hidden'); if (refreshBtn) refreshBtn.disabled = true; }
        function updateRefreshTimerDisplay() { if (!refreshTimerDisplay) return; if (isFetching) { refreshTimerDisplay.textContent = 'Refreshing...'; refreshTimerDisplay.classList.add('refreshing'); } else if (countdownValue >= 0 && authToken) { refreshTimerDisplay.textContent = `Auto-refresh in: ${countdownValue}s`; refreshTimerDisplay.classList.remove('refreshing'); } else { refreshTimerDisplay.textContent = 'Auto-refresh idle'; refreshTimerDisplay.classList.remove('refreshing'); } }
        function resetCountdownVisual() { countdownValue = REFRESH_INTERVAL_MS / 1000; updateRefreshTimerDisplay(); }
        function openModal(modalId) { console.log("Opening modal:", modalId); const modal = document.getElementById(modalId); if (modal) { if (modalId === 'messageModal') { if(messageBodyFrame) messageBodyFrame.srcdoc = '<html><body></body></html>'; if(messageBodyText) messageBodyText.textContent = ''; if(messageBodyFrame) messageBodyFrame.classList.add('hidden'); if(messageBodyText) messageBodyText.classList.add('hidden'); if(messageLoading) messageLoading.classList.remove('hidden'); } modal.style.display = 'flex'; document.body.style.overflow = 'hidden'; } else { console.error("Modal not found:", modalId); } }
        function closeModal(modalElement) { if (modalElement) { console.log("Closing modal:", modalElement.id); modalElement.style.display = 'none'; if (modalElement.id === 'messageModal') { if(messageBodyFrame) messageBodyFrame.srcdoc = '<html><body></body></html>'; if(messageBodyText) messageBodyText.textContent = ''; selectedMessageId = null; renderMessages(); } document.body.style.overflow = ''; } else { console.warn("closeModal called with null element"); } }
        async function loadAndPopulateDomains() { console.log("API: Fetching domain list..."); if (!domainSelect) { return; } domainSelect.disabled = true; domainSelect.innerHTML = '<option value="">Loading domains...</option>'; try { const response = await fetch(`${API_BASE_URL}/domains?page=1`); if (!response.ok) throw new Error(`(${response.status})`); const data = await response.json(); let domainsData = []; if (data && data['hydra:member'] && Array.isArray(data['hydra:member'])) { domainsData = data['hydra:member']; } else if (Array.isArray(data)) { domainsData = data; } if (domainsData.length > 0) { availableDomains = domainsData; const activeDomains = availableDomains.filter(d => d.isActive); const inactiveDomains = availableDomains.filter(d => !d.isActive); activeDomains.sort((a, b) => a.domain.localeCompare(b.domain)); inactiveDomains.sort((a, b) => a.domain.localeCompare(b.domain)); domainSelect.innerHTML = ''; if (activeDomains.length > 0) { const group = document.createElement('optgroup'); group.label = 'Active Domains'; activeDomains.forEach(d => { const o = document.createElement('option'); o.value = d.domain; o.textContent = d.domain; group.appendChild(o); }); domainSelect.appendChild(group); } if (inactiveDomains.length > 0) { const group = document.createElement('optgroup'); group.label = 'Other Domains'; inactiveDomains.forEach(d => { const o = document.createElement('option'); o.value = d.domain; o.textContent = d.domain; group.appendChild(o); }); domainSelect.appendChild(group); } if (domainSelect.options.length === 0 && availableDomains.length > 0) { availableDomains.sort((a, b) => a.domain.localeCompare(b.domain)); availableDomains.forEach(d => { const o = document.createElement('option'); o.value = d.domain; o.textContent = d.domain; domainSelect.appendChild(o); }); } else if (domainSelect.options.length === 0) { domainSelect.innerHTML = '<option value="">No domains found</option>'; throw new Error("No domains available."); } domainSelect.disabled = false; if(generateBtn) generateBtn.disabled = false; } else { throw new Error('No domains found structure.'); } } catch (error) { console.error('Domain Load Error:', error); displayError(`Domains Error: ${error.message}`); if (domainSelect) domainSelect.innerHTML = '<option value="">Error</option>'; if(generateBtn) generateBtn.disabled = true; } }
        async function createAccount(domain) { const username = randomString(11); const password = randomString(16); const address = `${username}@${domain}`; console.log(`API: Creating account: ${address}`); try { const r = await fetch(`${API_BASE_URL}/accounts`, { method: 'POST', headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' }, body: JSON.stringify({ address: address, password: password }) }); if (!r.ok) { let m = `(${r.status})`; try { const ed = await r.json(); m = ed.detail||ed.title||(ed.violations?ed.violations[0].message:m); } catch {} if (r.status === 429) { throw new Error('(429)'); } throw new Error(m); } const ad = await r.json(); currentEmail = address; currentPassword = password; return { address: address, password: password }; } catch (e) { console.error('Account Error:', e); if (e && e.message && e.message.includes('(429)')) { displayError("Server busy (too many requests). Please wait 5-10 seconds and try again.", true); } else { displayError(`Create Fail: ${e.message || 'Unknown error'}`); } throw e; } } // Updated 429 message
        async function getToken(address, password) { console.log(`API: Getting token: ${address}`); try { const r = await fetch(`${API_BASE_URL}/token`, { method: 'POST', headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' }, body: JSON.stringify({ address: address, password: password }) }); if (!r.ok) { let m=`(${r.status})`; try{const ed=await r.json(); m=ed.message||ed.detail||m;}catch{} throw new Error(m); } const d=await r.json(); if (d.token) { authToken = d.token; return d.token; } throw new Error('No token.'); } catch (e) { displayError(`Auth Fail: ${e.message}`); throw e; } }
        async function fetchInbox(isManualRefresh = false) { if (!authToken) { return; } if (isFetching) { return; } const fetchUrl = `${API_BASE_URL}/messages`; const fetchOptions = { method: 'GET', headers: { 'Authorization': `Bearer ${authToken}`, 'Accept': 'application/json' } }; console.log(`FETCHING INBOX (Flex - Manual: ${isManualRefresh}).`); isFetching = true; if (refreshBtn) refreshBtn.disabled = true; resetCountdownVisual(); if (messageList && messageList.children.length === 0) showLoader(); try { const response = await fetch(fetchUrl, fetchOptions); if (!response.ok) { let errorMsg = `API Error (${response.status})`; try { const errorData = await response.json(); errorMsg = errorData.detail || errorData.title || errorMsg; } catch (e) {} if (response.status === 401) { clearInboxInterval(); authToken = null; displayError("Session ended."); } else { displayError(`Inbox Error: ${errorMsg}`); } isFetching = false; hideLoader(); if(refreshBtn) refreshBtn.disabled = !authToken; updateRefreshTimerDisplay(); return; } const data = await response.json(); let messages = []; if (data && data['hydra:member'] && Array.isArray(data['hydra:member'])) { messages = data['hydra:member']; } else if (Array.isArray(data)) { messages = data; } else { console.warn("Unexpected API response structure.", data); } renderMessages(messages); clearError(); } catch (error) { console.error('FETCH INBOX FAILED:', error); if (error instanceof TypeError) { displayError(`Network Error: Could not connect. (${error.message})`); } else { displayError(`Inbox Fetch Error: ${error.message}`); } hideLoader(); } finally { isFetching = false; if (refreshBtn) refreshBtn.disabled = !authToken; updateRefreshTimerDisplay(); } }
        async function fetchAndShowMessage(messageId) { if (!authToken || isFetchingMessage) { return; } isFetchingMessage = true; selectedMessageId = messageId; renderMessages(); if (messageLoading) messageLoading.classList.remove('hidden'); if (messageBodyFrame) { messageBodyFrame.classList.add('hidden'); messageBodyFrame.srcdoc = '<html><body></body></html>'; } if (messageBodyText) messageBodyText.classList.add('hidden'); if (messageModalSubject) messageModalSubject.textContent = "Loading..."; if (messageModalFrom) messageModalFrom.textContent = ""; if (messageModalTo) messageModalTo.textContent = ""; if (messageModalDate) messageModalDate.textContent = ""; openModal('messageModal'); try { const fetchUrl = `${API_BASE_URL}/messages/${messageId}`; const fetchOptions = { method: 'GET', headers: { 'Authorization': `Bearer ${authToken}`, 'Accept': 'application/json' } }; const response = await fetch(fetchUrl, fetchOptions); if (!response.ok) { let errorMsg = `Failed (${response.status})`; try { const errorData = await response.json(); errorMsg = errorData.detail || errorData.title || (response.status === 404 ? "Not Found" : errorMsg); } catch {} throw new Error(errorMsg); } const msg = await response.json(); if (messageModalSubject) messageModalSubject.textContent = msg.subject || '(No Subject)'; if (messageModalFrom) messageModalFrom.textContent = msg.from?.address || 'Unknown'; if (messageModalTo) messageModalTo.textContent = msg.to?.map(t => t.address).join(', ') || currentEmail || 'Unknown'; if (messageModalDate) messageModalDate.textContent = formatPrettyDate(msg.createdAt); if (messageLoading) messageLoading.classList.add('hidden'); if (msg.html && msg.html.length > 0 && msg.html[0].trim() !== '') { if (messageBodyFrame) { messageBodyFrame.srcdoc = msg.html[0]; messageBodyFrame.classList.remove('hidden'); } if (messageBodyText) messageBodyText.classList.add('hidden'); } else if (msg.text) { if (messageBodyText) { messageBodyText.textContent = msg.text; messageBodyText.classList.remove('hidden'); } if (messageBodyFrame) messageBodyFrame.classList.add('hidden'); } else { if (messageBodyText) { messageBodyText.textContent = '(No content available)'; messageBodyText.classList.remove('hidden'); } if (messageBodyFrame) messageBodyFrame.classList.add('hidden'); } } catch (error) { console.error('Message Fetch Error:', error); if (messageLoading) messageLoading.classList.add('hidden'); if (messageBodyText) { messageBodyText.textContent = `Error loading message: ${error.message}`; messageBodyText.classList.remove('hidden'); } if (messageBodyFrame) messageBodyFrame.classList.add('hidden'); if (messageModalSubject) messageModalSubject.textContent = "Error"; } finally { isFetchingMessage = false; } }
        function renderMessages(messages = []) { hideLoader(); const messageArray = Array.isArray(messages) ? messages : []; if (!messageList) { return; } messageList.innerHTML = ''; if (messageArray.length === 0) { if(emptyInboxMessage) emptyInboxMessage.classList.remove('hidden'); } else { if(emptyInboxMessage) emptyInboxMessage.classList.add('hidden'); messageArray.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)); messageArray.forEach(msg => { const li = document.createElement('li'); li.dataset.messageId = msg.id; if (msg.id === selectedMessageId) { li.classList.add('selected'); } const formattedDate = formatPrettyDate(msg.createdAt); const senderName = escapeHTML(msg.from?.name || ''); const senderAddress = escapeHTML(msg.from?.address || 'Unknown Sender'); const senderDisplay = senderName && senderName !== senderAddress ? `${senderName} <${senderAddress}>` : senderAddress; const intro = escapeHTML(msg.intro || '(No preview)'); li.innerHTML = ` <div class="msg-header"> <span class="msg-sender" title="${senderAddress}">${senderDisplay}</span> <span class="msg-date">${formattedDate}</span> </div> <div class="msg-subject">${escapeHTML(msg.subject || '(No Subject)')}</div> <div class="msg-intro">${intro}</div> `; messageList.appendChild(li); }); } }
        function updateEmailDisplay(email) { if(!emailDisplayContainer || !emailDisplay) return; emailDisplay.textContent = email; setTimeout(() => { emailDisplayContainer.classList.add('visible'); }, 10); updateCopyButton('Copy'); }
        function hideEmailDisplay() { if(emailDisplayContainer) emailDisplayContainer.classList.remove('visible'); }
        function clearInboxInterval() { if (inboxIntervalId) { clearInterval(inboxIntervalId); inboxIntervalId = null; } stopCountdownTimer(); }
        async function handleGenerateClick() { console.log("Generate button clicked"); if (!domainSelect || domainSelect.disabled || !domainSelect.value) { displayError("Please wait for domains to load or select a valid domain.", true); return; } const selectedDomain = domainSelect.value; if(generateBtn) { generateBtn.disabled = true; generateBtn.textContent = 'Generating...'; } clearError(); clearInboxInterval(); hideEmailDisplay(); showLoader(); if(messageList) messageList.innerHTML = ''; if(emptyInboxMessage) emptyInboxMessage.classList.add('hidden'); authToken = null; currentEmail = null; currentPassword = null; selectedMessageId = null; try { const { address, password } = await createAccount(selectedDomain); await getToken(address, password); updateEmailDisplay(address); if(generateBtn) generateBtn.textContent = 'Generate New Address'; if(refreshBtn) refreshBtn.disabled = false; inboxIntervalId = setInterval(() => fetchInbox(false), REFRESH_INTERVAL_MS); startCountdownTimer(); await new Promise(resolve => setTimeout(resolve, 100)); await fetchInbox(true); } catch (error) { console.error("Generation Fail:", error); if (!errorDisplay || errorDisplay.classList.contains('hidden')) { displayError(`Generation process failed: ${error.message || 'Unknown error'}`); } if(generateBtn) generateBtn.textContent = 'Generate New Address'; hideLoader(); stopCountdownTimer(); if(emptyInboxMessage) emptyInboxMessage.classList.remove('hidden'); } finally { if(generateBtn && domainSelect && !domainSelect.disabled) generateBtn.disabled = false; } }
        function handleCopyClick() { if (!currentEmail) return; const textToCopy = currentEmail; if (navigator.clipboard && window.isSecureContext) { navigator.clipboard.writeText(textToCopy).then(() => { updateCopyButton('Copied!', true); }).catch(err => { copyFallback(textToCopy); }); } else { copyFallback(textToCopy); } }
        function copyFallback(text) { const textArea = document.createElement('textarea'); textArea.value = text; textArea.style.position = 'fixed'; textArea.style.top = '-9999px'; textArea.style.left = '-9999px'; document.body.appendChild(textArea); textArea.focus(); textArea.select(); try { const successful = document.execCommand('copy'); if (!successful) throw new Error('execCommand failed'); updateCopyButton('Copied!', true); } catch (err) { displayError('Could not copy.'); updateCopyButton('Failed'); setTimeout(() => updateCopyButton('Copy'), 2000); } finally { document.body.removeChild(textArea); } }

        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
             console.log("DOM fully loaded - Initializing...");
             hideEmailDisplay(); let currentTheme = 'light'; try { currentTheme = localStorage.getItem('theme') || 'light'; } catch (e) {} applyTheme(currentTheme);
             if (generateBtn) { generateBtn.addEventListener('click', handleGenerateClick); }
             if (copyBtn) { copyBtn.addEventListener('click', handleCopyClick); }
             if (themeToggleButton) { themeToggleButton.addEventListener('click', toggleTheme); }
             // Attach listener to ALL buttons with data-modal
             document.querySelectorAll('[data-modal]').forEach(button => {
                button.addEventListener('click', () => {
                    const modalId = button.getAttribute('data-modal');
                    if (modalId) { openModal(modalId); }
                     else { console.error("Button missing data-modal", button); }
                });
             });
             const allCloseButtons = document.querySelectorAll('.close-modal');
             allCloseButtons.forEach(button => { button.addEventListener('click', () => { const modal = button.closest('.modal'); if(modal) closeModal(modal); }); });
             if (modals.length > 0) { modals.forEach(modal => { modal.addEventListener('click', (event) => { if (event.target === modal) { closeModal(modal); } }); }); }
             if (messageList) { messageList.addEventListener('click', (event) => { const listItem = event.target.closest('li[data-message-id]'); if (listItem) { const messageId = listItem.dataset.messageId; fetchAndShowMessage(messageId); } }); }
             if (refreshBtn) { refreshBtn.addEventListener('click', () => { if (authToken && !isFetching) { fetchInbox(true); } else if (!authToken) { displayError("Generate an address first."); } }); }
             const yearSpan = document.getElementById('copyright-year');
             if(yearSpan) yearSpan.textContent = new Date().getFullYear();
             stopCountdownTimer(); if(emptyInboxMessage) emptyInboxMessage.classList.add('hidden');
             loadAndPopulateDomains();
             console.log('Initialization complete. Ready.');
         });

    </script>

</body>
</html>